(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{100:function(e,t){},11:function(e,t,n){"use strict";t.a={api_domain:"http://a57338e9-a1d6-4107-b41e-209dd3514024.mock.pstmn.io",profileElement:"React-Base",logoElement:"IN+",rootIndex:"/",siteName:"HaoFun",copyright:"\xa9 2018",locale:"en-US",locales:{"zh-Hant":"ZH","en-US":"EN"}}},115:function(e,t,n){e.exports=n(211)},127:function(e,t){},13:function(e,t,n){"use strict";n.d(t,"e",function(){return a}),n.d(t,"f",function(){return r}),n.d(t,"a",function(){return o}),n.d(t,"d",function(){return c}),n.d(t,"c",function(){return l}),n.d(t,"b",function(){return i});var a="LOGIN",r="LOGOUT",o="FETCH_USER",c="FETCH_USER_TOKEN",l="FETCH_USER_SUCCEEDED",i="FETCH_USER_FAILURE"},133:function(e,t){},17:function(e,t,n){"use strict";n.d(t,"f",function(){return r}),n.d(t,"d",function(){return o}),n.d(t,"e",function(){return c}),n.d(t,"b",function(){return l}),n.d(t,"c",function(){return i}),n.d(t,"a",function(){return u});var a=n(13),r=function(){return{type:a.f}},o=function(e){return{type:a.d,access_token:e}},c=function(e,t,n){return{type:a.e,account:e,password:t,callback:n}},l=function(e){return{type:a.a,callback:e}},i=function(e){return{type:a.c,user:e}},u=function(e){return{type:a.b,error:e}}},205:function(e,t,n){},209:function(e,t,n){},211:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),o=n(19),c=n.n(o),l=n(17),i=n(37),u=n(22),s=n(14),m=n(102),d=n.n(m),p=n(103),f=n.n(p),g={login:"Login",logout:"Log out",forget_password:"Forgot password?",do_not_have_an_account:"Do not have an account?",create_an_account:"Create an account",account:"Account",email:"Email",password:"Password",submit:"Submit",login_success:"Login Success",login_fail:"Login Failed",welcome:"Hello, {username}",test_label:"Test",minor_label:"Minor",main_label:"Main"},h={login:"\u767b\u5165",logout:"\u767b\u51fa",forget_password:"\u5fd8\u8a18\u5bc6\u78bc?",do_not_have_an_account:"\u9084\u6c92\u6709\u5e33\u6236\u55ce?",create_an_account:"\u65b0\u589e\u5e33\u6236",account:"\u5e33\u6236",email:"\u4fe1\u7bb1",password:"\u5bc6\u78bc",submit:"\u78ba\u8a8d",login_success:"\u767b\u5165\u6210\u529f",login_fail:"\u767b\u5165\u5931\u6557",welcome:"\u60a8\u597d, {username}",test_label:"\u6e2c\u8a66",minor_label:"\u6e2c\u8a66Minor",main_label:"\u6e2c\u8a66Main"};Object(u.b)(Object(i.a)(d.a).concat(Object(i.a)(f.a)));var b,v,w=Object(s.connect)(function(e){return{locale:e.getIn(["locale","locale"]),localeMessage:function(e){switch(e){case"en-US":return g;case"zh-Hant":return h;default:return g}}(e.getIn(["locale","locale"]))}})(function(e){var t=e.locale,n=e.children,a=e.localeMessage;return r.a.createElement(u.a,{key:t,locale:t,messages:a},n)}),E=n(20),O=n(21),y=function(e,t){return b=t.intl,e.children};y.contextTypes={intl:u.d.isRequired};var j=new(function(){function e(){return Object(E.a)(this,e),v||(v=this),v}return Object(O.a)(e,[{key:"formatMessage",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return b.formatMessage(e,t)}}]),e}()),N=y;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var _=n(43);function k(e){switch(arguments.length>1&&void 0!==arguments[1]?arguments[1]:null){case"INFO":return _.toast.info(e);case"SUCCESS":return _.toast.success(e);case"WARNING":return _.toast.warn(e);case"ERROR":return _.toast.error(e);default:return Object(_.toast)(e)}}var C=n(7),I=Object(C.a)(),L=n(28),x=n(26),M=n(27),S=n(62),H=n(36),D=n(93),R=n(41),T=n(51),U=n.n(T),A=n(38),V=n(39);function G(){var e=Object(A.a)(["\n  margin: 2em auto;\n  width: 40px;\n  height: 40px;\n  position: relative;\n"]);return G=function(){return e},e}function z(){var e=Object(A.a)(["\n    width: 100%;\n    height: 100%;\n    position: absolute;\n    left: 0;\n    top: 0;\n    "," &:before {\n      content: '';\n      display: block;\n      margin: 0 auto;\n      width: 15%;\n      height: 15%;\n      background-color: #999;\n      border-radius: 100%;\n      animation: ",";\n      ",";\n    }\n  "]);return z=function(){return e},e}function F(){var e=Object(A.a)(["\n  "," 1.2s infinite ease-in-out both;\n"]);return F=function(){return e},e}function W(){var e=Object(A.a)(["\n  0%,\n  39%,\n  100% {\n    opacity: 0;\n  }\n\n  40% {\n    opacity: 1;\n  }\n"]);return W=function(){return e},e}var B=Object(V.c)(W()),P=Object(V.a)(F(),B),J=function(e){var t=V.b.div(z(),e.rotate&&"\n      -webkit-transform: rotate(".concat(e.rotate,"deg);\n      -ms-transform: rotate(").concat(e.rotate,"deg);\n      transform: rotate(").concat(e.rotate,"deg);\n    "),P,e.delay&&"\n        -webkit-animation-delay: ".concat(e.delay,"s;\n        animation-delay: ").concat(e.delay,"s;\n      "));return r.a.createElement(t,null)},Z=V.b.div(G()),q={loading:function(){return r.a.createElement(Z,null,r.a.createElement(J,null),r.a.createElement(J,{rotate:30,delay:-1.1}),r.a.createElement(J,{rotate:60,delay:-1}),r.a.createElement(J,{rotate:90,delay:-.9}),r.a.createElement(J,{rotate:120,delay:-.8}),r.a.createElement(J,{rotate:150,delay:-.7}),r.a.createElement(J,{rotate:180,delay:-.6}),r.a.createElement(J,{rotate:210,delay:-.5}),r.a.createElement(J,{rotate:240,delay:-.4}),r.a.createElement(J,{rotate:270,delay:-.3}),r.a.createElement(J,{rotate:300,delay:-.2}),r.a.createElement(J,{rotate:330,delay:-.1}))},delay:200,timeout:2e3},X=U()(Object(R.a)({loader:function(){return n.e(1).then(n.bind(null,212))}},q)),K=U()(Object(R.a)({loader:function(){return n.e(2).then(n.bind(null,213))}},q)),$=U()(Object(R.a)({loader:function(){return n.e(3).then(n.bind(null,214))}},q)),Q=[{path:"/login",exact:!0,name:"login",component:U()(Object(R.a)({loader:function(){return n.e(4).then(n.bind(null,215))}},q))}],Y=[{path:"/main",exact:!1,name:"main",layout:"main",component:K},{path:"/minor",exact:!1,name:"minor",layout:"main",component:$},{path:"/",exact:!0,name:"home",layout:"main",component:X}],ee=n(11),te=n(18);function ne(){var e=Object(A.a)(["\n  display: flex;\n  float: left;\n"]);return ne=function(){return e},e}var ae=V.b.div(ne()),re=function(e){var t=e.dropdownClassName,n=e.dropdownToggleClassName,a=e.dropdownToggleValue,o=e.dropdownMenuRight,c=e.dropdownItemList,l=e.itemOnClick,i=e.setItemValue;return r.a.createElement(te.g,{className:t},r.a.createElement(te.d,{className:n},a),r.a.createElement(te.c,{right:o},c.map(function(e){return r.a.createElement(te.b,{onClick:l,value:e.value,key:e.key},i(e))})))};function oe(e){switch(!0){case e.hasICON&&e.hasSpan:return r.a.createElement(a.Fragment,null,r.a.createElement("i",{className:e.iconClassName}),r.a.createElement("span",{className:e.spanClassName&&e.spanClassName},ce(e)));case e.hasSpan:return r.a.createElement("span",{className:e.spanClassName&&e.spanClassName}," ",ce(e));case e.hasICON:return r.a.createElement("i",{className:e.hasICON});default:return ce(e)}}function ce(e){return e.showValue?e.showValue:e.value}var le=function(e){var t=e.dropdownClassName,n=e.dropdownToggleClassName,a=e.dropdownItemList,o=e.dropdownToggleValue,c=e.itemOnClick,l=e.dropdownMenuRight;return r.a.createElement(re,{dropdownClassName:t||"minimalize-styl-2",dropdownToggleClassName:n||"btn btn-primary",dropdownToggleValue:o||"null",dropdownMenuRight:l,dropdownItemList:a,itemOnClick:c,setItemValue:oe})},ie=function(e){var t=e.toggleHandler,n=e.dropDownValue,a=e.changeLocaleHandler,o=e.dropDownLocale;return r.a.createElement(ae,null,r.a.createElement(te.a,{className:"minimalize-styl-2 btn btn-primary",onClick:t},r.a.createElement("i",{className:"fa fa-bars"})),r.a.createElement(le,{dropdownToggleValue:n,itemOnClick:a,dropdownItemList:o}))},ue=function(e){var t=e.dropDownValue,n=e.dropDownLocale,a=e.changeLocaleHandler,o=e.toggleHandler;return r.a.createElement(ie,{dropDownValue:t,dropDownLocale:n,changeLocaleHandler:a,toggleHandler:o})},se=function(e){var t=e.username,n=e.logout,a=e.dropDownMenuUser;return r.a.createElement("ul",{className:"nav navbar-top-links navbar-right"},r.a.createElement(le,{dropdownClassName:"dropdown-menu-user",dropdownToggleValue:t,itemOnClick:n,dropdownItemList:a}))},me=function(e){var t=e.logout,n=e.dropDownMenuUser,a=e.username;return r.a.createElement(se,{username:a||"null",logout:t,dropDownMenuUser:n})},de=function(e){var t=e.locale,n=e.dropDownLocale,a=e.changeLocale,o=e.toggleMiniNavbar,c=e.logout,l=e.dropDownMenuUser,i=e.username;return r.a.createElement("div",{className:"row border-bottom"},r.a.createElement(te.f,{className:"navbar navbar-static-top white-bg margin-bottom-0",role:"navigation"},r.a.createElement(ue,{dropDownValue:t,dropDownLocale:n,changeLocaleHandler:a,toggleHandler:o}),r.a.createElement(me,{logout:c,dropDownMenuUser:l,username:i})))},pe=function(e){function t(){return Object(E.a)(this,t),Object(L.a)(this,Object(x.a)(t).apply(this,arguments))}return Object(M.a)(t,e),Object(O.a)(t,[{key:"shouldComponentUpdate",value:function(e,t){return e.user!==this.props.user||e.locale!==this.props.locale}},{key:"render",value:function(){var e=this.props,t=e.intl,n=e.user,a=e.logout,o=e.changeLocale,c=e.locale,l=e.toggleMiniNavbar,i=[{key:"logout",hasSpan:!0,hasICON:!0,iconClassName:"fa fa-sign-out",value:t.formatMessage({id:"logout"})}],u=Object.keys(ee.a.locales).map(function(e){return{key:e,value:e,showValue:ee.a.locales[e]}});return r.a.createElement(de,{locale:ee.a.locales[c],dropDownLocale:u,changeLocale:o,toggleMiniNavbar:l,dropDownMenuUser:i,logout:a,username:n&&n.name})}}]),t}(a.Component),fe=Object(s.connect)(function(e){return{locale:e.getIn(["locale","locale"]),user:e.getIn(["auth","user"])}},function(e){return{changeLocale:function(t){e({type:"CHANGE_LOCALE",locale:t.target.value})},logout:function(){e(Object(l.f)())},toggleMiniNavbar:function(){e({type:"TOGGLE_MINI_NAVBAR"})}}})(Object(u.c)(pe)),ge=function(){return r.a.createElement("footer",{className:"footer fixed"},r.a.createElement("div",{className:"text-center"},ee.a.siteName," ",r.a.createElement("strong",null,"Copyright")," ",ee.a.copyright))},he=n(107),be=n.n(he),ve=(n(157),be.a),we=n(89),Ee=function(){return r.a.createElement("li",{className:"nav-header"},r.a.createElement("div",{className:"profile-element"},r.a.createElement(we.a,{to:ee.a.rootIndex},r.a.createElement("h3",null,ee.a.profileElement))),r.a.createElement("div",{className:"logo-element"},ee.a.logoElement))},Oe=n(108),ye=n.n(Oe),je=n(111),Ne=n.n(je),_e=function(e){var t=e.height,n=e.router,a=(e.intl,e.user,e.renderItem),o=e.menuContent;return r.a.createElement(te.f,{className:"navbar-default navbar-static-side"},r.a.createElement(ve,null,r.a.createElement(ye.a,{menuHeader:Ee,menuHeight:t,renderItem:a,content:o,LinkComponent:Ne.a,activeLinkTo:n})))};function ke(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"nav-label";return r.a.createElement("span",{className:t},e)}var Ce=Object(s.connect)(function(e){return{user:e.getIn(["auth","user"]),router:e.getIn(["router","location"])}})(Object(u.c)(function(e){var t=e.height,n=e.router,a=e.intl,o=e.user;return r.a.createElement(_e,{height:t,router:n.pathname,intl:a,user:o,renderItem:ke,menuContent:Re(a,o)})})),Ie=function(e){function t(){return Object(E.a)(this,t),Object(L.a)(this,Object(x.a)(t).apply(this,arguments))}return Object(M.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){var e=this.props,t=e.user,n=e.height,a=Y.reduce(function(e,n){return t.map(function(e){return e.component}).includes(n.name)?Object(i.a)(e).concat([r.a.createElement(H.a,{key:n.name,exact:n.exact,path:n.path,component:n.component})]):e},[]);return r.a.createElement("div",{id:"wrapper"},r.a.createElement(Ce,{height:n}),r.a.createElement("div",{id:"page-wrapper",className:"gray-bg"},r.a.createElement(fe,null),r.a.createElement(S.ConnectedRouter,{history:I},r.a.createElement(D.a,null,a)),r.a.createElement(ge,null)))}},{key:"componentDidMount",value:function(){window.addEventListener("resize",this.props.screenResize)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.props.screenResize)}}]),t}(a.PureComponent),Le=Object(s.connect)(function(e){var t=e.getIn(["auth","user"]);return{user:t=t&&t.permissions?t.permissions:[],height:e.getIn(["styled","height"])}},function(e){return{screenResize:function(){var t=window,n=t.innerWidth,a=t.innerHeight;e({type:"CHANGE_WINDOW_SIZE",width:n,height:a})}}})(Ie),xe=n(92),Me=function(e){function t(){return Object(E.a)(this,t),Object(L.a)(this,Object(x.a)(t).apply(this,arguments))}return Object(M.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){var e=Q.map(function(e){return r.a.createElement(H.a,{key:e.name,exact:e.exact,path:e.path,component:e.component})});return r.a.createElement("div",{className:"loginColumns animated fadeInDown"},r.a.createElement(S.ConnectedRouter,{history:I},r.a.createElement(D.a,null,e,r.a.createElement(xe.a,{exact:!0,to:"/login"}))))}}]),t}(a.Component),Se=n(35),He=function(e){function t(){return Object(E.a)(this,t),Object(L.a)(this,Object(x.a)(t).apply(this,arguments))}return Object(M.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){var e=this.props.isAuth?Le:Me;return r.a.createElement(Se.a,{history:I},r.a.createElement(e,null))}}]),t}(a.PureComponent),De=Object(s.connect)(function(e){return{isAuth:e.getIn(["auth","status"])}})(He),Re=function(e,t){var n=[];return t&&t.permissions&&(n=t.permissions.sort(function(e,t){return e.parent_id-t.parent_id}).reduce(function(t,n){return n.parent_id&&t[n.parent_id].content?t[n.parent_id].content.push({id:n.id,icon:n.icon,label:e.formatMessage({id:n.label}),to:n.path}):t[n.id]={id:n.id,icon:n.icon,label:e.formatMessage({id:n.label}),content:[]},t},[]).filter(function(e){return e})),n},Te=n(45),Ue=n(64),Ae=n(113),Ve=n(112),Ge=n(31),ze=localStorage.getItem("react_locale"),Fe=Object(Ge.fromJS)({locale:ze||ee.a.locale}),We=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_LOCALE":return localStorage.setItem("react_locale",t.locale),e.merge({locale:t.locale});default:return e}},Be=Object(Ge.fromJS)({width:window.innerWidth,height:window.innerHeight,miniNavbar:!1}),Pe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Be,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_WINDOW_SIZE":return t.width<769?document.body.classList.add("body-small"):document.body.classList.remove("body-small"),e.merge({width:t.width,height:t.height});case"TOGGLE_MINI_NAVBAR":return e.get("miniNavbar")?document.body.classList.remove("mini-navbar"):document.body.classList.add("mini-navbar"),e.merge({miniNavbar:!e.get("miniNavbar")});default:return e}},Je=n(13),Ze=n(52),qe=n.n(Ze),Xe=qe.a.get("token"),Ke=Object(Ge.fromJS)({status:!!Xe,token:Xe,user:{},error:null}),$e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ke,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Je.f:return qe.a.remove("token"),e.merge({status:!1,error:null,token:null,user:{}});case Je.d:return qe.a.set("token",t.access_token,{expires:t.expires}),e.merge({token:t.access_token});case Je.c:return e.merge({status:!0,error:null,user:t.user});case Je.b:return qe.a.remove("token"),e.merge({token:null,error:t.error,user:{}});default:return e}},Qe=n(16),Ye=n.n(Qe),et=n(12),tt=n(40),nt=n.n(tt),at="".concat(ee.a.api_domain,"/login"),rt="".concat(ee.a.api_domain,"//auth/me"),ot=Ye.a.mark(ut),ct=Ye.a.mark(st),lt=Ye.a.mark(mt),it=Ye.a.mark(dt);function ut(){return Ye.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(et.d)(Je.e,mt);case 2:case"end":return e.stop()}},ot,this)}function st(){return Ye.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(et.d)(Je.a,dt);case 2:case"end":return e.stop()}},ct,this)}function mt(e){var t;return Ye.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,nt.a.post(at,{account:e.account,password:e.password});case 3:return t=n.sent,n.next=6,Object(et.a)([Object(et.c)(Object(l.d)(t.data.data.access_token,t.data.data.expires)),Object(et.c)(Object(l.b)(e.callback))]);case 6:n.next=10;break;case 8:n.prev=8,n.t0=n.catch(0);case 10:case"end":return n.stop()}},lt,this,[[0,8]])}function dt(e){var t;return Ye.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,nt.a.get(rt);case 3:return t=n.sent,n.next=6,Object(et.a)([Object(et.c)(Object(l.c)(Object(R.a)({},t.data.data))),Object(et.b)(k,j.formatMessage({id:"welcome"},{username:"\ud83e\udd84 ".concat(t.data.data.name)})),Object(et.b)(e.callback)]);case 6:n.next=12;break;case 8:return n.prev=8,n.t0=n.catch(0),n.next=12,Object(et.c)(Object(l.a)(n.t0.message));case 12:case"end":return n.stop()}},it,this,[[0,8]])}var pt=[ut(),st()],ft=Ye.a.mark(gt);function gt(){return Ye.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(et.a)(Object(i.a)(pt));case 2:case"end":return e.stop()}},ft,this)}var ht,bt=Object(Ae.a)(),vt=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Te.c,wt=Object(Te.d)((ht=I,Object(Ve.combineReducers)({router:Object(Ue.connectRouter)(ht),locale:We,styled:Pe,auth:$e})),vt(Object(Te.a)(Object(Ue.routerMiddleware)(I),bt)));bt.run(gt);var Et=wt;nt.a.interceptors.request.use(function(e){var t=Et.getState(),n=t.getIn(["auth","token"]);n&&(e.headers.common.Authorization="Bearer ".concat(n));var a=t.getIn(["locale","locale"]);return a&&(e.headers.common["Accept-Language"]=a),e}),nt.a.interceptors.response.use(function(e){return e},function(e){return 401===e.response.status&&Et.dispatch(Object(l.f)()),Promise.reject(e)});nt.a,n(197),n(199),n(201),n(203),n(205),n(209);Et.getState().getIn(["auth","token"])&&Et.dispatch(Object(l.b)(function(){I.push("/")})),c.a.render(r.a.createElement(s.Provider,{store:Et},r.a.createElement(w,null,r.a.createElement(N,null,r.a.createElement(function(){return r.a.createElement(_.ToastContainer,{position:"bottom-right",autoClose:5e3,newestOnTop:!0,closeOnClick:!0,draggable:!0,pauseOnHover:!0})},null),r.a.createElement(De,{history:I})))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[115,6,5]]]);
//# sourceMappingURL=main.7f863ee4.chunk.js.map